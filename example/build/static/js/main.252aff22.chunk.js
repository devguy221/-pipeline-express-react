(this["webpackJsonppipeline-express-react-example"]=this["webpackJsonppipeline-express-react-example"]||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/pipeline-express.c992dc67.jpg"},14:function(e,t,n){e.exports=n(41)},15:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);n(15);var r=n(0),a=n.n(r),o=n(9),s=n.n(o),c=n(2),i=n(3),u=n(13),l=n(12),p=n(1),m=n.n(p),d=n(6),f=n(10),h=n.n(f),x="_styles-module__AlgoButton__1E3Mb",y="_styles-module__AlgoSendButton__uMOg7",v=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,null,[{key:"init",value:function(){return new h.a}},{key:"connect",value:function(){var e=Object(d.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.connect();case 3:return n=e.sent,r=(r=n[0]).address,e.abrupt("return",r);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(d.a)(m.a.mark((function e(t,n,r,a,o){var s,c,i,u,l,p,d,f,h,x,y,v=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s=v.length>5&&void 0!==v[5]?v[5]:0,c="https://algoexplorerapi.io/v2/transactions/params",i="https://algoexplorerapi.io/v2/transactions",u=new Array(r.length),l=new Uint8Array(u),p=0,d=r.length;p<d;p++)l[p]=r.charCodeAt(p);return console.log("My encoded note: "+l),e.prev=7,e.next=10,fetch(c);case 10:return e.next=12,e.sent.json();case 12:return f=e.sent,h={from:a,to:t,amount:parseInt(n),note:l,genesisID:"mainnet-v1.0",genesisHash:"wGHE2Pwdvd7S12BL5FaOP20EGYesN73ktiC1qzkkit8=",type:"pay",flatFee:!0,fee:1e3,firstRound:f["last-round"],lastRound:f["last-round"]+1e3},0!==s&&(h.type="axfer",h.assetIndex=parseInt(s)),console.log(h),e.next=18,o.signTransaction(h);case 18:return x=e.sent,e.next=21,fetch(i,{method:"POST",headers:{"Content-Type":"application/x-binary"},body:x.blob}).then((function(e){return e.json()})).then((function(e){return JSON.stringify(e.txId)})).catch((function(e){console.error("Error:",e)}));case 21:return y=e.sent,e.abrupt("return",y);case 25:e.prev=25,e.t0=e.catch(7),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[7,25]])})));return function(t,n,r,a,o){return e.apply(this,arguments)}}()}]),e}(),b=function(e){var t=e.index,n=e.recipient,r=e.amount,o=e.note,s=e.myAddress,c=e.wallet,i=e.context,u=e.returnTo;return a.a.createElement("button",{className:y,onClick:function(){v.send(n,parseInt(r),o,s,c,t).then((function(e){if("undefined"!==typeof e){var t={};t[u]=e,i.setState(t)}}))}},"Send")},g=function(e){var t=e.wallet,n=e.context,r=e.returnTo;return a.a.createElement("button",{className:x,onClick:function(){v.connect(t).then((function(e){var t={};t[r]=e,n.setState(t)}))}},"Connect to MyAlgo")},E=(n(40),n(11)),w=n.n(E),A=v.init(),k=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).inputRecipient=function(e){r.setState({recipient:e.target.value})},r.inputAmount=function(e){r.setState({amount:e.target.value})},r.inputNote=function(e){r.setState({note:e.target.value})},r.state={myAddress:"",recipient:"",amount:0,note:"",txID:""},r}return Object(i.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{align:"center"},a.a.createElement("img",{alt:"Pipeline Express",src:w.a,width:"300"}),a.a.createElement("br",null),a.a.createElement(g,{wallet:A,context:this,returnTo:"myAddress"}),a.a.createElement("h3",null,"My Address: "+this.state.myAddress),a.a.createElement("form",null,a.a.createElement("label",null,"Recipient:",a.a.createElement("input",{type:"text",onChange:this.inputRecipient})),a.a.createElement("br",null),a.a.createElement("label",null,"Amount:",a.a.createElement("input",{type:"number",onChange:this.inputAmount})),a.a.createElement("label",null,a.a.createElement("br",null),"Note:",a.a.createElement("input",{type:"text",onChange:this.inputNote}))),a.a.createElement(b,{index:0,recipient:this.state.recipient,amount:this.state.amount,note:this.state.note,myAddress:this.state.myAddress,wallet:A,context:this,returnTo:"txID"}),a.a.createElement("h3",null,"Transaction ID: "+this.state.txID.slice(1,-1)))}}]),n}(r.Component);s.a.render(a.a.createElement(k,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.252aff22.chunk.js.map